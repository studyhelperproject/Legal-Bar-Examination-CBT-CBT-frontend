***

# AGENTS.md

## プロジェクト概要

- このリポジトリは Legal Bar Examination CBT のフロントエンド実装と仕様管理を目的とする。
- 主な技術スタック：TypeScript, React, 状況に応じて独自のAPIクライアント。


## セットアップ \& 実行

- 依存関係インストール: `pnpm install`
- 開発サーバ起動: `pnpm dev`
- 本番ビルド: `pnpm build`
- 単体テスト実行: `pnpm test`
- エンドツーエンドテスト: `pnpm e2e`


## コーディング規約

- TypeScript: strict。PRごとに型エラーゼロにする。
- Lint: `pnpm lint`（eslint, Prettier準拠）
- import順序: eslint-plugin-import ルールに従う。
- PRタイトル: `[api] 説明…` の形式。
- サーバーコンポーネントは現時点で未採用。


## テスト計画・実行処理

- 全ての新規機能実装前に単体テスト（Jest等）を作成・更新し、コードカバレッジ95%以上を維持する。[^3][^1]
- E2Eテスト対象：ユーザー認証、フォーム入力、API連携などクリティカル経路は必須。
- テスト実行はPR作成時CIで自動化され、すべて緑になることを必須条件とする。
- failing test、カバレッジ不達時はマージ禁止。


## 必須コマンド一覧

- 依存解決: `pnpm i`
- Lint/Typecheck: `pnpm lint && pnpm typecheck`
- 単体テスト: `pnpm test`
- E2E: `pnpm e2e`


## ガードレール・禁止事項

- APIキーや秘密情報をリポジトリへコミットしない。
- 破壊的変更はADR(doc/adr/)で意思決定を記録し、反映前にPRレビューを通す。
- テストまたはLintにfailが出た状態でcommit, push, mergeは禁止。


## 参照と連携タスク

- 受入基準・要件は `docs/requirements/README.md` を必ず参照すること。該当機能の文書があれば、そのAcceptance Criteriaを満たすテストを追加/修正すること。[^3]
- タスク分割・進行管理・テスト詳細計画等は「/specify」「/plan」「/tasks」等のエージェント拡張コマンド記法で管理してもよい（例：Spec Kit, Codex, Cursor対応可）。[^1]
- 各種コマンドやテスト結果、ADRへのリンクは必要に応じて相対パスでAGENTS.mdから参照可能にする。[^3]


## PRルール・CI/CD

- PR本文には変更理由／影響範囲／テスト結果スクリーンショット or ログを必ず記入。
- Encode（コード→仕様抽出）/Decode（仕様→コード生成）往復をCIテストプロセスに含め、差分計測・自動同期を実施する。[^1]


## エージェントが守るべき必須事項まとめ

- 明文化した受入基準やテスト、ガードレールを"必ず"満たすこと。
- コミット前に各種自動チェックの全合格が必要。
- 参照先文書やタスクドキュメント管理を優先し、目的外編集や未定義の振る舞いは禁止とする。

***
